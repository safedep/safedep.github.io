"use strict";(self.webpackChunksafedep=self.webpackChunksafedep||[]).push([[3958],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(n),g=r,h=d["".concat(c,".").concat(g)]||d[g]||l[g]||i;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5454:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:4},o="Gateway Authentication",s={unversionedId:"getting-started/gateway-authentication",id:"getting-started/gateway-authentication",title:"Gateway Authentication",description:"The Gateway supports authenticating clients (package managers) using",source:"@site/docs/getting-started/gateway-authentication.md",sourceDirName:"getting-started",slug:"/getting-started/gateway-authentication",permalink:"/docs/getting-started/gateway-authentication",draft:!1,editUrl:"https://github.com/safedep/safedep.github.io/tree/main/docs/getting-started/gateway-authentication.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Gateway Configuration",permalink:"/docs/getting-started/gateway-configuration"},next:{title:"Build Configuration",permalink:"/docs/getting-started/build-configuration"}},c={},p=[{value:"Basic Authentication Provider",id:"basic-authentication-provider",level:2},{value:"Protecting an Upstream Route",id:"protecting-an-upstream-route",level:2}],u={toc:p};function l(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"gateway-authentication"},"Gateway Authentication"),(0,r.kt)("p",null,"The Gateway supports authenticating clients (package managers) using\na pluggable authentication model. This means, multiple authentication providers\nwill eventually be supported."),(0,r.kt)("p",null,"However, ",(0,r.kt)("a",{parentName:"p",href:"#"},"HTTP Basic Authentication")," is considered as the only supported\ntransport of credentials since most package managers support it. The Gateway\nprocesses basic authentication credentials and authenticates the client using one of the\nconfigured authentication providers."),(0,r.kt)("h2",{id:"basic-authentication-provider"},"Basic Authentication Provider"),(0,r.kt)("p",null,"The basic authentication provider uses a ",(0,r.kt)("inlineCode",{parentName:"p"},"htaccess")," style password file. It\ncan be configured in ",(0,r.kt)("inlineCode",{parentName:"p"},"gateway.json")," for example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"authenticators": {\n  "default-basic-auth": {\n    "type": "Basic",\n    "basic_auth": {\n      "path": "/auth/basic-auth-credentials.txt"\n    }\n  }\n},\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"default-basic-auth")," is a name for the authentication provider"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"/auth/basic-auth-credentials.txt")," is the data source file for credentials")),(0,r.kt)("p",null,"New credentials can be created using the ",(0,r.kt)("a",{parentName:"p",href:"https://httpd.apache.org/docs/2.4/programs/htpasswd.html"},"htpasswd")," tool."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"htpasswd -nbB <user> <password> >> ./config/gateway-auth-basic.txt\n")),(0,r.kt)("p",null,"An username following the convention ",(0,r.kt)("inlineCode",{parentName:"p"},"<projectId>/<user>@<organization>")," can be\nused to add additoinal context identifiers in gateway generated events. This is\nuseful for traceability of artifacts to specific build projects."),(0,r.kt)("h2",{id:"protecting-an-upstream-route"},"Protecting an Upstream Route"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"authenticator")," can then be associated to upstreams to enable\nauthentication for specific routes (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"/maven2"),") in the gateway. Different\nroutes can be associated with different authentication providers. This allows\nflexible access control for different use-cases."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"upstreams": [\n  {\n    "type": "Maven",\n    "management_type": "GatewayAdmin",\n    "name": "maven-central",\n    "authentication": {\n      "type": "Basic",\n      "provider": "default-basic-auth"\n    },\n    "route": {\n      "path_prefix": "/maven2",\n      "host_rewrite_value": "repo.maven.apache.org",\n      "path_prefix_rewrite_value": "/maven2"\n    },\n    "repository": {\n      "host": "repo.maven.apache.org",\n      "port": "443",\n      "tls": true,\n      "sni": "repo.maven.apache.org",\n    }\n  },\n]\n')),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To configure authentication for upstream repositories, look at ",(0,r.kt)("a",{parentName:"p",href:"gateway-configuration"},"gateway\nconfiguration"))))}l.isMDXComponent=!0}}]);